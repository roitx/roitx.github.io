<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ROITX â€“ Game</title>
<style>
body{margin:0;background:black;overflow:hidden;font-family:Arial}
canvas{display:block;margin:auto}
</style>
</head>
<body>

<canvas id="game" width="900" height="450"></canvas>

<script>
const c=document.getElementById("game"),x=c.getContext("2d");

let state="play",paused=false;
let speed=6,score=0,gravity=0.7,shake=0;

const player={x:120,y:320,w:40,h:40,dy:0,j:false};
let enemies=[],powerups=[];
let shield=false;

function glow(a,b,w,h,col){
 x.shadowColor=col;x.shadowBlur=18;
 x.fillStyle=col;x.fillRect(a,b,w,h);
 x.shadowBlur=0;
}

function spawnEnemy(){
 let type=Math.random();
 if(type<0.3) enemies.push({t:"runner",x:c.width,y:320,w:35,h:50});
 else if(type<0.5) enemies.push({t:"zigzag",x:c.width,y:260,w:35,h:35,dir:1});
 else if(type<0.7) enemies.push({t:"fly",x:c.width,y:200,w:35,h:35});
 else if(type<0.9) enemies.push({t:"rush",x:c.width,y:320,w:30,h:45});
 else enemies.push({t:"boss",x:c.width,y:290,w:70,h:80,hp:2});
}
setInterval(()=>{ if(!paused) spawnEnemy(); },1300);

function collide(a,b){
 return a.x<b.x+b.w && a.x+a.w>b.x && a.y<b.y+b.h && a.y+a.h>b.y;
}

function loop(){
 if(paused){requestAnimationFrame(loop);return;}

 x.save();
 if(shake>0){
  x.translate(Math.random()*shake,Math.random()*shake);
  shake*=0.9;
 }

 x.clearRect(0,0,c.width,c.height);

 // Player
 player.dy+=gravity;
 player.y+=player.dy;
 if(player.y>=320){player.y=320;player.j=false;}
 glow(player.x,player.y,player.w,player.h,"#0ff");

 // Enemies AI
 enemies.forEach((e,i)=>{
  if(e.t==="runner") e.x-=speed;
  if(e.t==="fly") e.x-=speed+1;
  if(e.t==="rush"){e.x-=speed*1.8;}
  if(e.t==="zigzag"){
   e.x-=speed;
   e.y+=e.dir*2;
   if(e.y<200||e.y>300) e.dir*=-1;
  }
  if(e.t==="boss") e.x-=speed*0.6;

  let col="#f0f";
  if(e.t==="boss") col="#f00";
  glow(e.x,e.y,e.w,e.h,col);

  if(collide(player,e)){
   if(shield){shield=false;enemies.splice(i,1);shake=10;}
   else{
    alert("ROITX FINAL OVER\nScore: "+score);
    location.reload();
   }
  }
 });

 score++;
 speed+=0.0009;

 // HUD
 x.fillStyle="#fff";
 x.font="18px Arial";
 x.fillText("Score: "+score,20,30);
 if(shield) x.fillText("Shield ON",20,55);

 x.restore();
 requestAnimationFrame(loop);
}

document.addEventListener("keydown",e=>{
 if(e.code==="Space"&&!player.j){player.dy=-13;player.j=true;}
 if(e.code==="KeyP") paused=!paused;
});

loop();
</script>
</body>
</html>
